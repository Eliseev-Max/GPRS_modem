# 1 - AT Commands Reference Guide
# 2 - AT-команды. Руководство по использованию AT-команд для разработчиков телекоммуникационного оборудования

Специальная команда (#SELINT, см. §3.5.2.1.1) была введена для того, чтобы интерфейс AT был очень близок к стандартному.


_________________________________________________________________________________________________________________________________________

AT&V - вывести текущую конфигурацию модуля
ATE0 - отключить эхо
AT&F (AT&F0) - восстановить заводские настройки (из EEPROM)

AT&Y[<n>]	исполняемая команда, определяет основные профили, которые будут загружены при запуске.
	<n> = 0...1 - идентификатор профиля (0 по умолчанию)
	Примечание: команда Z <n> загружает нужный профиль только один раз;
				профиль, выбранный с помощью команды & Y, будет загружаться при каждом запуске.
	Примечание: если параметр не указан, команда ведет себя так же, как AT & Y0.

AT+CREG?\r\n - получить статус регистрации в сети оператора связи.

Статус регистрации определяет ВТОРОЕ число в ответе:

    0 - Не зарегистрирован, не проводится поиск нового оператора.
    1 - Зарегистрирован в домашней сети.
    2 - Не зарегистрирован, проводится поиск нового оператора.
    3 - Регистрация отклонена.
    4 - Статус неизвестен.
    5 - Зарегистрирован в роуминге.

+CGREG: (<n>) <stat>[,<lac>,<ci>] - статус регистрации в сети GPRS
	Команда контролирует возврат модемом результирующих кодов +CGREG: 

	Команда  чтения  возвращает  поддерживаемые  значения  параметра <stat>,
	который показывает, вернула  ли сеть сообщение о регистрации MT. 

	при n = 1
		возвращается <stat>
	при n = 2 или смене соты
		возвращаются сообщения об изменении статуса регистрации в сети +CGREG
		<stat>[,<lac>, <ci>]
		Значения <lac> и <ci> возвращаются только при <n>=2 и если MT зарегистрирован в сети.
		
Ответ модема:
+CGREG: 2,1,"62A8","A2C1"
	<n> = 2			# разрешить возврат добровольных результирующих кодов о регистрации  в  сети
					  содержащих  локальную  информацию  о  сети  +CGREG: <stat>[,<lac>,<ci>]
	<stat> = 1		#  зарегистрирован, своя сеть
	<lac> = "62A8"	# Строчный тип; двухбайтовый код локальной информации от сети в шестнадцатеричном формате.
	<ci> = "A2C1"	# Строчный тип; двухбайтовый ID соты в шестнадцатеричном формате.

AT+CPAS (== AT+CPAS?) - Статус активности мобильного оборудования
	0 – готово (возможны команды из TA/TE)
	1 – недоступно (невозможны команды)
	2 – неизвестно
	3 – дозвон (звонок активен)
	4 – в режиме соединения
	5 – в спящем режиме (сокращенный набор функций)

AT+CFUN? - запросить текущее состояние функционирования мобильного устройства
AT+CFUN=<fun> - установка уровня функциональных возможностей мобильного устройства
	<fun>
		0 – установить минимальную функциональность, процедура отсоединения IMSI.
		1 – установить полный набор функциональных возможностей с полным сбросом программного обеспечения.
	Если приложение собирается отключить питание устройства или выполнить процедуру отсоединения IMSI DETACH,
	то необходимо предварительно подать команду
		AT+CFUN=0 (эквивалентно AT+CPOF)
	Данная команда выполняет IMSI DETACH и производит резервное копирование некоторых внутренних параметров в SIM и EEPROM.
	После этого обращение к SIM-карте становится невозможным.
	
	Если  выключение  питания  мобильного  устройства не произошло после отсылки данной команды,
	то необходимо запустить команду AT+CFUN=1, чтобы перезапустить весь процесс GSM регистрации.
	
	Если выключение питания мобильного устройства произошло, при следующем включении GSM стек 
	автоматически запустится снова.
	
	Команда AT+CFUN=1 перезапускает весь GSM стек: происходит полный программный сброс.
	Все параметры сбрасываются до своих предыдущих значений, если не использовалось AT&W.
	Если  внести  записи  в  записную  книжку  (+CPBW),  а  затем  произвести 
	программный  сброс  (AT+CFUN=1,  если  до  этого  не  выполнялась  команда 
	AT+CFUN=0), то некоторые записи могут не сохраниться (слишком мало времени для внесения
	записей в SIM-карту).
	В дополнение к этому, возвращается ответ в виде ОК и используется скорость передачи данных,
	определенная командой +IPR. В режиме автомати-
	ческой установки скорости (autobauding) ответ может быть передан на другой 
	скорости, тем не менее, предпочтительно сохранять скорость передачи данных 
	командой AT&W до отсылки команды AT+CFUN=1

+CSQ - Уровень сигнала
AT+CSQ: <rssi>, <ber>
в ответ Вы получите два числа, через запятую.
	Первое число - уровень сигнала от 0 (менее -113 дБм) до 31 (более -51 дБм).
	Второе число - частота появления ошибок от 0 до 7 (GSM 05.08).

	Задаваемые значения:
		<rssi>: (0 = -113 dBm или меньше),
				(1 = -11 dBm),
				(2 до 30 = -109 до 53 dBm),
				(31 = 51 dBm или больше)
				(99 = не известно или нельзя определить)
		<ber>:
				(0...7 = как значение RXQUAL в таблице GSM 05.08)
				(99 = не известно или нельзя определить)
+COPS - выбор оператора

AT+COPS?\r\n - получить имя выбранного оператора (в цифровом формате).

AT+COPS=?\r\n - получить список доступных операторов (цифровой и буквенный формат).

AT+CR=<mode> -  включает детальный тип отчетов о сервисах при работе с входящими и исходящими соединениями в режиме данных.
				До отсылки приложению ответа CONNECT модем уточнит тип установленного соединения.
	0 - отключить подробные отчёты
	1 - включить подробные отчёты

+CGDCONT - Определить PDP контекст
+CGDCONT: [cid][PDP_type][APN][PDP_addr][d_comp][h_comp][pd1]
	[cid]		Идентификатор PDP-контекста, числовой параметр, указывает на конкретное опоеделение PDP-контекста
	[PDP_type]	тип PDP(Packet Data Protocol), строковый параметр. В нашем случае PDP_type = "IP"
	[APN]		(Access Point Name, имя точки доступа), строковый параметр, в нашем случае "static.beeline.ru"
	[PDP_addr]	строковый параметр, который идентифицирует терминал в адресной строке применимо к PDP
				Если заначение = 0 или опущено -► ТЕ принимает значение во время процедуры включения PDP,
				или будет запрошен динамический адрес
	[d_comp]	числовой параметр, настройка сжатия данных
	[h_comp]	числовой параметр, настройка сжатия заголовков
	[pd1]
	
	AT+CGDCONT=1,"IP","static.beeline.ru"

AT+CGPADDR	- Исполнительная командавозвращает список PDP-адресов для указанных идентификаторов контекста в формате:
[AT#CGPADDR]  	+CGPADDR: <cid>[,<PDP_addr>]<CR><LF>

	<cid> - числовой параметр, который указывает отдельное описание PDP-контекста.
			Если не <cid> указан, будут возвращены адреса для всех описанных (определённых) контекстов.
	<PDP_addr> - строка, которая идентифицирует терминал в адресном пространстве, применимом к PDP.
				 Адрес может быть статическим или динамическим. Для статического адреса это будет адрес,
				 установленный командой + CGDCONT при определении контекста.
				 Для динамического адреса это будет адрес, назначенный во время последней активации контекста PDP,
				 который использовал определение контекста, на которое ссылается <cid>;
				 если адрес не доступен, параметр <PDP_addr> не отображается 

#SCFG Socket Configuration - Команда Set устанавливает параметры конфигурации сокета
(1 c 439)
AT#SCFG=<connId>,<cid>,<pktSz>,<maxTo>,<connTo>,<txTo>
		<connId> - идентификатор соединения сокета
		<cid> - идентификатор контекста PDP
		<pktSz> - размер пакета, который используется стеком TCP/UDP/IP для настройки данных
		<maxTo> - тайм-аут обмена (или тайм-аут неактивности сокета),
				  если за это время не происходит обмена данными, соединение закрывается
				0 -нет тайм-аута
				1...65535 - значение тайм-аута в секундах
				по умолчанию 90 с
		<connTo> - тайм-аут соединения, если мы не можем создать соединение за указанное время,
				   возбуждается ошибка
				10...1200 - значение тайм-аута в сотнях милисекунд
				по умолчанию 600
		<txTo> - тайм-аут настройки данных, после этого периода времени данные отправляются, даже если их размер меньше,
				 чем максимальный размер пакета
			  0 - тайм-аут не установлен
			  1...255 значение тайм-аута в сотнях милисекунд
			  по умолчанию 50
	
#SGACT - Context Activation - Возвращает состояние всех контекстов, которые были определены через команды +CGDCONT или +GSMCONT
(1 с 438)
AT#SGACT=? - команда тестирования сообщает диапазон параметров <cid> <stat>

Примечание: активация / деактивация контекста возвращает ОШИБКУ, если с ней не связан ни один сокет (см. AT # SCFG).
Примечание: после активации контекста GSM вы можете использовать команды Multisocket, FTP или Email AT для отправки / получения пакетов TCP / IP через GSM.
Примечание: для деактивации контекста GSM необходимо выдать AT # SGACT = 0,0 на тот же последовательный порт, который использовался при активации контекста.
Примечание. На активацию контекста GSM влияет команда AT + CBST. В частности, активация контекста GSM разрешена только для «непрозрачных» вызовов данных.

Примечание: активация контекста GSM, когда контекст PDP уже активирован, вызывает приостановку контекста PDP.
Примечание: если контекст GSM активен, активация контекста PDP запрещена.

Примечание: если параметры имени пользователя и / или пароля пусты, то модуль не использует метод аутентификации во время процедуры АКТИВАЦИИ КОНТЕКСТА PDP (см. Также AT # SGACTAUTH).
Примечание. Запрос на деактивацию контекста PDP не может быть выполнен, если вызов активен / звонит и модуль зарегистрирован в 2G (GPRS класс B).
AT # SGACT = x, 0 вернет OK, даже если запрос не может быть выполнен.
Проверить текущий статус с помощью AT # SGACT?
Примечание: ответ на команду AT # SGACT сообщает IP-адрес, полученный из сети.
В случае контекста PDP IPV4 ответ имеет формат:
#SGACT: xxx.xxx.xxx.xxx
Primechaniye: aktivatsiya / deaktivatsiya konteksta vozvrashchayet OSHIBKU, yesli s ney ne svyazan ni odin soket (sm. AT # SCFG).

• «SM»: ADN (телефонная книга SIM)
• «LD»: FDN (фиксированный набор SIM, запрещенная телефонная книга)
• «MC»: MSISDN (SIM собственный номера)
• «ON»: EN (экстренные номера SIM)
• «ME»: LND (комбинированная книга ME и SIM)
• «RC»: MSD (список пропущенных звонков)
• «MT»: MT (телефонная книга мобильного устройства)
• «SN»: SDN (служба набора номера)

#SCFGEXT - Socket Configuration Extended - Команда настройки устанавливает расширенные параметры конфигурации сокета
AT#SCFGEXT=<connId>,<srMode>,<recvDataMode>,<keepalive>,[<ListenAutoRsp>,<sendDataMode>]
	<connId> - идентификатор соединения сокета
		1...6
	<srMode> - SRing незапрашиваемый режим
		0 - Normal (default): 
	   SRING: <connId> where <connId> is the socket connection 
		identifier 
		1 – Data amount (количество данных): 
	   SRING: <connId>,<recData> where <recData> is the amount of 
		data received on the socket connection number <connId> 
		2 - Data view (просмотр данных): 
	   SRING: <connId>,<recData>,<data> same as before and <data> is 
		data received displayed following <dataMode> value 
		3 – Data view with UDP datagram informations (просмотр данных с информацией UDP-дейтаграмм): 
	   SRING: <sourceIP>,<sourcePort><connId>,<recData>, 
		<dataLeft>,<data> same as before with <sourceIP>,<sourcePort> and 
		<dataLeft> that means the number of bytes left in the UDP datagram 
	 
	Note: <srMode> value 3 is not available in SW 13.00.xxx
	
	<recvDataMode> - режим просмотра полученных данных в режиме командной строки
					 (AT#SRECV or <srMode> = 2)
				0 - текстовый режим (по умолчанию)
				1 - шестнадцатеричный режим
	<keepalive> - устанавливает значение TCP Keepalive в минутах
			0 - деактивирован (отключен)
			1...240 - включен Keepalive в минутах
	<ListenAutoRsp> - устанавливает режим прослушивания автоответа, влияющий на команды AT # SL и AT # SLUDP 
			0 - деактивирован
			1 - активирован
	<sendDataMode> - режим данных для отправки данных в режиме команд (AT#SSEND)
			0 - data represented as  text (default) 
			1 - data represented as sequence of hexadecimal numbers (from 00 to FF) 
		Каждый октет данных представляет собой шестнадцатеричное число длиной два символа IRA.
		Примечание: эти значения автоматически сохраняются в NVM.
		Примечание. Keepalive доступен только для TCP-соединений.
	Примечание: поведение AT # SL и AT # SLUDP в случае режима автоответа или в случае отсутствия 
	режима автоответа см. В описании двух команд.		

AT#SCFGEXT? - Команда Чтения возвращает текущие значения параметров расширенной конфигурации для всех 6 сокетов в формате
	#SCFGEXT:<connId1>, <srMode1>,<dataMode1>,<keepalive1>,<ListenAutoRsp1>,0<CR><LF>
AT#SCFGEXT=? тестовая команда возвращает диапазон поддерживаемых значений для всех подпараметров.

AT+CGATT - GPRS Attach Or Detach (присоединение или разъединение по GPRS)
	Исполнение команд используется, чтобы соединить терминал по/ разъединить терминал от службы GPRS,
	в зависимости от параметра <state>
	<state> - состояние соединения по GPRS
	
AT+CGACT=[<state>, <cid>] - активировать или деактивировать определённый PDP-контекст.
		   После того, как команда выполнена, MT находится в командном режиме V.25ter.
		   Если какой-либо PDP контекст уже находится в запрашиваемом состоянии, это состояние не изменяется.
	<state> - показывает состояние активации PDP контекстов
		0: не активирован
		1: активирован
	<cid> - числовой параметр, который определяет номер PDP контекста


+CNUM: <alpha>,<number>,<type><CR><LF>
AT+CNUM\r\n - получить свой номер телефона

AT+CGDATA - Команда выполнения вызывает выполнение любых действий, необходимых для установления связи с сетью
			с использованием одного или нескольких типов PDP GPRS.
AT+CSCA? - выводит отчёт о текущем значении сервисного центра (СЦ) в формате:  <number>,<type>
		<number> - номер телефона СЦ в формате, определённом в <type>
		<type> - тип номера
			129 - national numbering scheme 
			145 - international numbering scheme (contains the character "+") 
AT+CSCA[=[<number>[,<type>]]] - устанавливает адрес сервисного центра, который будет использоваться для
								передачи SMS с мобильных устройств.
			
https://www.youtube.com/watch?v=_t69L0kB9kc

