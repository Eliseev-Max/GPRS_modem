Перевод статьи:	https://m2msupport.net/m2msupport/data-call-at-commands-to-set-up-gprsedgeumtslte-data-call/

С помощью инструмента Online AT Command Tester легко тестировать вызовы данных. Во-первых, инструмент предоставляет интерфейс для чтения / редактирования / удаления профилей PDP, которые содержат необходимые параметры настройки вызова, такие как APN, тип вызова данных (IPV4 или IPv6) и т. Д. Затем вы можете выбрать профиль PDP и подключиться. Затем инструмент тестера AT-команд проверит, зарегистрировано ли устройство в сети. Если это так, он отправит необходимые AT-команды на устройство, чтобы начать вызов данных.

1. После включения устройства проверьте наличие SIM-карты. Если SIM-карта вставлена неправильно или SIM-карта заблокирована, исправьте эти проблемы.

	AT+CPIN?
	+CPIN: READY
	OK
# SIM-карта готова к использованию

2. Затем проверьте статус регистрации устройства.
Если статус регистрации «Поиск» или «Не зарегистрирован», это означает, что устройство не может получить сигнал от базовой станции. Обычно устройство должно найти ближайшую базовую станцию в течение нескольких минут (максимум 15 минут). Если вы не получаете ответ «Зарегистрирован» на команду AT + CGREG,
- Убедитесь, что антенна правильно подключена к устройству.
- Убедитесь, что диапазоны, поддерживаемые устройством, соответствуют диапазонам сетевого провайдера.

	AT+CGREG?
	+CGREG: 0,1
	OK
# Устройство зарегистрировано в домашней сети

3. После проверки статуса сетевой регистрации вы можете получить информацию о сети. Если устройство зарегистрировано в домашней сети, информация о сети на используемой SIM-карте должна совпадать с информацией о сети, возвращаемой командой AT + COPS:

	AT+COPS?
	+COPS: 0,0,”Beeline”
	OK
# 

4. Теперь проверим качество сигнала:

	AT+CSQ
	+CSQ: 9,0
	OK

# RSSI от -109 до 53 dBm
# Это ненамного лучше предельного покрытия.
# Мы по-прежнему должны иметь возможность выполнять вызов данных в этом состоянии сигнала, но пропускная способность может быть не такой хорошей.

5. После успешной регистрации выполняется GPRS Attach

	AT+CGATT=1
	OK
	
# Даже если подключение к GPRS выполнено успешно, это не означает, что вызов данных был установлен. 
# В GPRS протокол пакетных данных (PDP) определяет сеанс передачи данных.
# Контекст PDP устанавливает путь к данным между устройством и GGSN (шлюзовым узлом поддержки GPRS).
# GGSN действует как шлюз между устройством и остальным миром. 
# Таким образом, он должен установить контекст PDP, прежде чем он сможет отправлять/получать данные в Интернете.
# GGSN идентифицируется через имя точки доступа (APN). У каждого оператора есть свои собственные APN, которые обычно доступны в Интернете.
# Устройство может определять несколько контекстов PDP, которые однозначно хранятся в идентификаторах контекста.

Например:

	AT+CGDCONT=1,”IP”,”static.beeline.ru”

Чтобы перечислить все контексты, определённые в PDP, ввести команду:
	AT+CGDCONT?

6. Теперь, когда контексты PDP определены, используйте правильный контекст PDP, который соответствует SIM-карте (с соответствующим APN).

7. Теперь, чтобы настроить сеанс, необходимо активировать соответствующий контекст PDP.

	AT+CGACT=1,1
	OK

# Первый параметр (1) = АКТИВИРОВАТЬ КОНТЕКСТ
# Второй параметр - идентификатор контекста

8. После успешной активации контекста PDP устройство может отправлять / получать данные через Интернет. Чтобы проверить, нет ли проблем с активацией PDP, отправьте команду AT + CEER. Проверьте код ошибки и выполните следующие действия.

	AT+CEER
	+CEER: Normal, unspecified
	OK
